<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据分析</title>
    <!-- 引入Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 全局样式 */
        :root {
            --primary: #4285f4;
            --secondary: #34a853;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gray: #6c757d;
            --light: #f8f9fa;
            --dark: #343a40;
            --border-radius: 8px;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background-color: #f5f7fa;
            color: var(--dark);
            padding: 30px;
        }

        /* 页面标题区域 */
        .page-header {
            margin-bottom: 24px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .page-description {
            color: var(--gray);
            font-size: 14px;
        }

        /* 头部操作区域 */
        .header-actions {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 20px;
            gap: 12px;
        }

        /* 数据分析特有样式 */
        .data-analysis-layout {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* KPI指标卡片样式 */
        .kpi-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .kpi-info {
            flex: 1;
        }

        .kpi-label {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 4px;
        }

        .kpi-value {
            font-size: 28px;
            font-weight: 600;
            color: var(--dark);
        }

        .kpi-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 4px;
            font-size: 12px;
        }

        .trend-up {
            color: var(--success);
        }

        .trend-down {
            color: var(--danger);
        }

        .kpi-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: rgba(66, 133, 244, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--primary);
            font-size: 20px;
        }

        /* 数据分析筛选面板样式 */
        .analysis-filters {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 24px;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
        }

        .date-input,
        .filter-select {
            padding: 8px 12px;
            border: 1px solid #e1e4e8;
            border-radius: var(--border-radius);
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .date-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .filter-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        /* 按钮样式 */
        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: var(--border-radius);
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn-primary:hover {
            background-color: #3367d6;
        }

        .btn-secondary {
            background-color: white;
            color: var(--gray);
            border: 1px solid #e1e4e8;
            padding: 8px 16px;
            border-radius: var(--border-radius);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            border-color: var(--gray);
            color: var(--dark);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* 图表容器样式 */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .chart-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: box-shadow 0.2s;
        }

        .chart-card:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .chart-actions {
            display: flex;
            gap: 8px;
        }

        .chart-action-btn {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            padding: 6px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .chart-action-btn:hover {
            background-color: var(--light);
            color: var(--dark);
        }

        .chart-content {
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .chart-placeholder {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--gray);
            text-align: center;
        }

        /* 数据表格样式 */
        .data-table-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 24px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .table-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        .search-input {
            padding: 8px 12px;
            border: 1px solid #e1e4e8;
            border-radius: var(--border-radius);
            font-size: 14px;
            width: 200px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 16px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .data-table th {
            background-color: var(--light);
            font-weight: 600;
            font-size: 14px;
            color: var(--dark);
        }

        .data-table tbody tr:hover {
            background-color: rgba(66, 133, 244, 0.05);
        }

        .data-table tbody tr {
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .table-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-info {
            font-size: 14px;
            color: var(--gray);
        }

        .pagination {
            display: flex;
            gap: 4px;
        }

        .page-item {
            padding: 6px 12px;
            border: 1px solid #e1e4e8;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-item:hover {
            background-color: var(--light);
        }

        .page-item.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .page-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* 洞察报告样式 */
        .insights-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 24px;
        }

        .insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .insights-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        .insight-card {
            background-color: var(--light);
            border-radius: var(--border-radius);
            padding: 16px;
            display: flex;
            gap: 12px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .insight-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--box-shadow);
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .insight-icon.success {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success);
        }

        .insight-icon.warning {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--warning);
        }

        .insight-icon.info {
            background-color: rgba(66, 133, 244, 0.1);
            color: var(--primary);
        }

        .insight-content {
            flex: 1;
        }

        .insight-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .insight-description {
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .insight-actions {
            display: flex;
            gap: 8px;
        }

        .insight-action-btn {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 12px;
            transition: all 0.2s;
        }

        .insight-action-btn:hover {
            background-color: white;
            color: var(--dark);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body {
                padding: 16px;
            }
            
            .kpi-dashboard,
            .charts-container,
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-row {
                grid-template-columns: 1fr;
            }
            
            .filter-actions {
                flex-direction: column;
            }
            
            .table-header,
            .table-footer {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }
            
            .table-actions {
                width: 100%;
            }
            
            .search-input {
                width: 100%;
            }
            
            .pagination {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- 主内容区域 -->
    <div class="data-analysis-layout">
        <!-- 页面标题 -->
        <div class="page-header">
            <h1 class="page-title">数据分析</h1>
            <p class="page-description">可视化查看和分析各类数据指标和趋势</p>
        </div>

        <!-- 头部操作区域 -->
        <div class="header-actions">
            <button class="btn-secondary" onclick="configureInsights()">
                <i class="fas fa-cog"></i> 配置洞察
            </button>
            <button class="btn-secondary" onclick="generateReport()">
                <i class="fas fa-file-pdf"></i> 生成报告
            </button>
        </div>

        <!-- KPI指标面板 -->
        <div class="kpi-dashboard">
            <div class="kpi-card">
                <div class="kpi-info">
                    <div class="kpi-label">库存周转率</div>
                    <div class="kpi-value">8.2</div>
                    <div class="kpi-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        <span>12.5%</span>
                    </div>
                </div>
                <div class="kpi-icon">
                    <i class="fas fa-boxes"></i>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-info">
                    <div class="kpi-label">订单履行率</div>
                    <div class="kpi-value">94.8%</div>
                    <div class="kpi-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        <span>3.2%</span>
                    </div>
                </div>
                <div class="kpi-icon">
                    <i class="fas fa-truck"></i>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-info">
                    <div class="kpi-label">平均配送时间</div>
                    <div class="kpi-value">2.8天</div>
                    <div class="kpi-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        <span>6.7%</span>
                    </div>
                </div>
                <div class="kpi-icon">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-info">
                    <div class="kpi-label">供应链成本</div>
                    <div class="kpi-value">12.4%</div>
                    <div class="kpi-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        <span>8.1%</span>
                    </div>
                </div>
                <div class="kpi-icon">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
            </div>
        </div>

        <!-- 数据分析筛选面板 -->
        <div class="analysis-filters">
            <div class="filter-row">
                <div class="filter-group">
                    <label class="filter-label">开始日期</label>
                    <input type="date" class="date-input" id="startDate">
                </div>
                <div class="filter-group">
                    <label class="filter-label">结束日期</label>
                    <input type="date" class="date-input" id="endDate">
                </div>
                <div class="filter-group">
                    <label class="filter-label">课程</label>
                    <select class="filter-select" onchange="filterByCourse(this.value)">
                        <option value="全部课程">全部课程</option>
                        <option value="供应链管理">供应链管理</option>
                        <option value="物流运作">物流运作</option>
                        <option value="库存控制">库存控制</option>
                        <option value="运输管理">运输管理</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">指标类型</label>
                    <select class="filter-select" onchange="filterByMetricType(this.value)">
                        <option value="全部指标">全部指标</option>
                        <option value="库存指标">库存指标</option>
                        <option value="配送指标">配送指标</option>
                        <option value="成本指标">成本指标</option>
                        <option value="服务指标">服务指标</option>
                    </select>
                </div>
            </div>
            <div class="filter-actions">
                <button class="btn-primary" onclick="applyDateFilter()">
                    <i class="fas fa-filter"></i> 应用筛选
                </button>
                <button class="btn-secondary" onclick="resetAllFilters()">
                    <i class="fas fa-redo-alt"></i> 重置
                </button>
            </div>
        </div>

        <!-- 图表可视化区域 -->
        <div class="charts-container">
            <!-- 销售趋势分析图表 -->
            <div class="chart-card" id="salesTrendChart">
                <div class="chart-header">
                    <h3 class="chart-title">销售趋势分析</h3>
                    <div class="chart-actions">
                        <select class="filter-select btn-small" onchange="changeDataGranularity(this.value)">
                            <option value="日">日</option>
                            <option value="周">周</option>
                            <option value="月" selected>月</option>
                            <option value="季度">季度</option>
                        </select>
                        <button class="chart-action-btn" onclick="downloadChartData('销售趋势分析')">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="chart-action-btn" onclick="expandChart(this.closest('.chart-card'))">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="chart-content">
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-line" style="font-size: 48px; color: var(--gray); margin-bottom: 16px;"></i>
                        <p>销售趋势数据加载中...</p>
                    </div>
                </div>
            </div>

            <!-- 库存水平分析图表 -->
            <div class="chart-card" id="inventoryLevelChart">
                <div class="chart-header">
                    <h3 class="chart-title">库存水平分析</h3>
                    <div class="chart-actions">
                        <select class="filter-select btn-small" onchange="changeDataGranularity(this.value)">
                            <option value="日">日</option>
                            <option value="周">周</option>
                            <option value="月" selected>月</option>
                            <option value="季度">季度</option>
                        </select>
                        <button class="chart-action-btn" onclick="downloadChartData('库存水平分析')">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="chart-action-btn" onclick="expandChart(this.closest('.chart-card'))">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="chart-content">
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-bar" style="font-size: 48px; color: var(--gray); margin-bottom: 16px;"></i>
                        <p>库存水平数据加载中...</p>
                    </div>
                </div>
            </div>

            <!-- 物流效率分析图表 -->
            <div class="chart-card" id="logisticsEfficiencyChart">
                <div class="chart-header">
                    <h3 class="chart-title">物流效率分析</h3>
                    <div class="chart-actions">
                        <select class="filter-select btn-small" onchange="changeChartTimeRange(this.closest('.chart-card'), this.value)">
                            <option value="最近7天">最近7天</option>
                            <option value="最近30天" selected>最近30天</option>
                            <option value="最近90天">最近90天</option>
                            <option value="全年">全年</option>
                        </select>
                        <button class="chart-action-btn" onclick="downloadChartData('物流效率分析')">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="chart-action-btn" onclick="expandChart(this.closest('.chart-card'))">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="chart-content">
                    <div class="chart-placeholder">
                        <div class="chart-loaded">
                            <i class="fas fa-check-circle" style="font-size: 48px; color: var(--success); margin-bottom: 16px;"></i>
                            <p>图表数据加载完成</p>
                            <p class="text-sm" style="color: var(--gray); margin-top: 8px;">
                                点击图表可查看详细信息
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 成本结构分析图表 -->
            <div class="chart-card" id="costStructureChart">
                <div class="chart-header">
                    <h3 class="chart-title">成本结构分析</h3>
                    <div class="chart-actions">
                        <select class="filter-select btn-small" onchange="changeChartTimeRange(this.closest('.chart-card'), this.value)">
                            <option value="最近7天">最近7天</option>
                            <option value="最近30天" selected>最近30天</option>
                            <option value="最近90天">最近90天</option>
                            <option value="全年">全年</option>
                        </select>
                        <button class="chart-action-btn" onclick="downloadChartData('成本结构分析')">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="chart-action-btn" onclick="expandChart(this.closest('.chart-card'))">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="chart-content">
                    <div class="chart-placeholder">
                        <div class="chart-loaded">
                            <i class="fas fa-check-circle" style="font-size: 48px; color: var(--success); margin-bottom: 16px;"></i>
                            <p>图表数据加载完成</p>
                            <p class="text-sm" style="color: var(--gray); margin-top: 8px;">
                                点击图表可查看详细信息
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 数据表格区域 -->
        <div class="data-table-container">
            <div class="table-header">
                <h3 class="table-title">详细数据</h3>
                <div class="table-actions">
                    <input type="text" class="search-input" placeholder="搜索数据..." oninput="searchTableData(this.value)">
                    <select class="filter-select btn-small" onchange="filterTableData(this.value)">
                        <option value="全部数据">全部数据</option>
                        <option value="库存数据">库存数据</option>
                        <option value="销售数据">销售数据</option>
                        <option value="成本数据">成本数据</option>
                    </select>
                    <button class="chart-action-btn" onclick="showColumnSettings()">
                        <i class="fas fa-table"></i>
                    </button>
                    <button class="chart-action-btn" onclick="exportTableData()">
                        <i class="fas fa-file-excel"></i>
                    </button>
                </div>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>日期</th>
                        <th>产品类别</th>
                        <th>销售额</th>
                        <th>订单数</th>
                        <th>库存水平</th>
                        <th>配送时间</th>
                        <th>成本</th>
                    </tr>
                </thead>
                <tbody>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-01</td>
                        <td>电子产品</td>
                        <td>¥128,500</td>
                        <td>425</td>
                        <td>85%</td>
                        <td>2.3天</td>
                        <td>¥64,250</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-02</td>
                        <td>服装配饰</td>
                        <td>¥75,300</td>
                        <td>312</td>
                        <td>68%</td>
                        <td>2.1天</td>
                        <td>¥37,650</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-03</td>
                        <td>食品饮料</td>
                        <td>¥42,800</td>
                        <td>286</td>
                        <td>72%</td>
                        <td>1.9天</td>
                        <td>¥21,400</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-04</td>
                        <td>家居用品</td>
                        <td>¥93,100</td>
                        <td>356</td>
                        <td>58%</td>
                        <td>2.5天</td>
                        <td>¥46,550</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-05</td>
                        <td>电子产品</td>
                        <td>¥115,600</td>
                        <td>398</td>
                        <td>78%</td>
                        <td>2.2天</td>
                        <td>¥57,800</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-06</td>
                        <td>服装配饰</td>
                        <td>¥83,400</td>
                        <td>334</td>
                        <td>65%</td>
                        <td>2.0天</td>
                        <td>¥41,700</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-07</td>
                        <td>食品饮料</td>
                        <td>¥49,200</td>
                        <td>312</td>
                        <td>69%</td>
                        <td>1.8天</td>
                        <td>¥24,600</td>
                    </tr>
                    <tr onclick="viewDataDetails(this)">
                        <td>2023-06-08</td>
                        <td>家居用品</td>
                        <td>¥98,700</td>
                        <td>378</td>
                        <td>55%</td>
                        <td>2.3天</td>
                        <td>¥49,350</td>
                    </tr>
                </tbody>
            </table>

            <div class="table-footer">
                <div class="table-info">显示 1-8 条，共 256 条记录</div>
                <div class="pagination">
                    <div class="page-item disabled" onclick="navigateToPrevPage()">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                    <div class="page-item active" onclick="navigateToPage(1)">1</div>
                    <div class="page-item" onclick="navigateToPage(2)">2</div>
                    <div class="page-item" onclick="navigateToPage(3)">3</div>
                    <div class="page-item" onclick="navigateToPage(4)">4</div>
                    <div class="page-item" onclick="navigateToPage(5)">5</div>
                    <div class="page-item" onclick="navigateToNextPage()">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- 智能洞察报告区域 -->
        <div class="insights-container">
            <div class="insights-header">
                <h3 class="insights-title">智能洞察</h3>
                <div class="insights-actions">
                    <button class="btn-secondary btn-small" onclick="configureInsights()">
                        <i class="fas fa-sliders-h"></i> 配置
                    </button>
                </div>
            </div>

            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-icon success">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="insight-content">
                        <h4 class="insight-title">库存周转率提升</h4>
                        <p class="insight-description">电子产品类别的库存周转率提升了12.5%，达到8.2次/月，高于行业平均水平。</p>
                        <div class="insight-actions">
                            <button class="insight-action-btn" onclick="handleInsightAction('库存周转率提升', 'fa-chart-line')">
                                <i class="fas fa-chart-line"></i>
                            </button>
                            <button class="insight-action-btn" onclick="handleInsightAction('库存周转率提升', 'fa-download')">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-icon warning">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="insight-content">
                        <h4 class="insight-title">华东地区配送时间延长</h4>
                        <p class="insight-description">华东地区近一周的平均配送时间延长至3.5天，比上月增加了1.2天。</p>
                        <div class="insight-actions">
                            <button class="insight-action-btn" onclick="handleInsightAction('华东地区配送时间延长', 'fa-map-marker-alt')">
                                <i class="fas fa-map-marker-alt"></i>
                            </button>
                            <button class="insight-action-btn" onclick="handleInsightAction('华东地区配送时间延长', 'fa-bell')">
                                <i class="fas fa-bell"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-icon info">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="insight-content">
                        <h4 class="insight-title">供应链成本优化</h4>
                        <p class="insight-description">通过供应商整合，本月供应链成本占比降低至12.4%，节省了8.1%的成本支出。</p>
                        <div class="insight-actions">
                            <button class="insight-action-btn" onclick="handleInsightAction('供应链成本优化', 'fa-money-bill-wave')">
                                <i class="fas fa-money-bill-wave"></i>
                            </button>
                            <button class="insight-action-btn" onclick="handleInsightAction('供应链成本优化', 'fa-share-alt')">
                                <i class="fas fa-share-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-icon warning">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="insight-content">
                        <h4 class="insight-title">食品类别缺货风险</h4>
                        <p class="insight-description">食品类别库存预警，部分畅销商品库存周转天数低于安全库存线，存在缺货风险。</p>
                        <div class="insight-actions">
                            <button class="insight-action-btn" onclick="handleInsightAction('食品类别缺货风险', 'fa-box')">
                                <i class="fas fa-box"></i>
                            </button>
                            <button class="insight-action-btn" onclick="handleInsightAction('食品类别缺货风险', 'fa-handshake')">
                                <i class="fas fa-handshake"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-icon success">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="insight-content">
                        <h4 class="insight-title">订单履行率创新高</h4>
                        <p class="insight-description">本月订单履行率达到94.8%，创历史新高，准时配送率提升了3.2个百分点。</p>
                        <div class="insight-actions">
                            <button class="insight-action-btn" onclick="handleInsightAction('订单履行率创新高', 'fa-clipboard-check')">
                                <i class="fas fa-clipboard-check"></i>
                            </button>
                            <button class="insight-action-btn" onclick="handleInsightAction('订单履行率创新高', 'fa-award')">
                                <i class="fas fa-award"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 设置日期范围默认值为过去30天至今天
            const today = new Date();
            const thirtyDaysAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);
            
            document.querySelectorAll('.date-input')[0].valueAsDate = thirtyDaysAgo;
            document.querySelectorAll('.date-input')[1].valueAsDate = today;
            
            // 初始化事件监听器
            initializeEventListeners();
            
            // 初始化图表占位符
            initializeChartPlaceholders();
            
            // 高亮活动筛选条件
            highlightActiveFilters();
            
            // 加载分析数据
            loadAnalysisData();
            
            // 更新KPI指标
            updateKPIMetrics();
        });

        // 初始化事件监听器
        function initializeEventListeners() {
            console.log('初始化事件监听器...');
            // 这里可以添加更多事件监听器的初始化逻辑
        }

        // 加载分析数据
        function loadAnalysisData() {
            console.log('加载数据分析...');
            
            // 模拟从服务器加载数据
            // 这里可以添加实际的数据加载逻辑
            // fetch('/api/analysis-data')
            //   .then(response => response.json())
            //   .then(data => renderAnalysisData(data));
            
            // 模拟数据加载完成
            setTimeout(() => {
                document.querySelectorAll('.chart-placeholder').forEach(placeholder => {
                    placeholder.innerHTML = `
                        <div class="chart-loaded">
                            <i class="fas fa-check-circle" style="font-size: 48px; color: var(--success); margin-bottom: 16px;"></i>
                            <p>图表数据加载完成</p>
                            <p class="text-sm" style="color: var(--gray); margin-top: 8px;">
                                点击图表可查看详细信息
                            </p>
                        </div>
                    `;
                });
                
                updateDataTable();
            }, 1500);
        }

        // 更新KPI指标
        function updateKPIMetrics() {
            // 模拟从服务器获取KPI数据
            const kpiData = {
                inventoryTurnover: {
                    value: 8.2,
                    trend: 'up',
                    change: 12.5
                },
                orderFulfillment: {
                    value: 94.8,
                    trend: 'up',
                    change: 3.2
                },
                deliveryTime: {
                    value: 2.8,
                    trend: 'down',
                    change: 6.7
                },
                supplyChainCost: {
                    value: 12.4,
                    trend: 'down',
                    change: 8.1
                }
            };
            
            // 更新KPI卡片
            document.querySelectorAll('.kpi-card').forEach((card, index) => {
                const metrics = Object.values(kpiData)[index];
                card.querySelector('.kpi-value').textContent = metrics.value;
                
                const trendElement = card.querySelector('.kpi-trend');
                trendElement.className = `kpi-trend trend-${metrics.trend}`;
                trendElement.innerHTML = `
                    <i class="fas fa-arrow-${metrics.trend}"></i>
                    <span>${metrics.change}%</span>
                `;
            });
        }

        // 初始化图表占位符
        function initializeChartPlaceholders() {
            // 这里可以添加初始化图表的逻辑
            // 例如使用Chart.js或ECharts创建实际图表
            console.log('初始化图表占位符...');
        }

        // 高亮活动筛选条件
        function highlightActiveFilters() {
            // 默认选中"全部课程"和"全部指标"
            document.querySelectorAll('.filter-select')[1].value = '全部课程';
            document.querySelectorAll('.filter-select')[2].value = '全部指标';
        }

        // 应用日期筛选
        function applyDateFilter() {
            const startDate = document.querySelectorAll('.date-input')[0].value;
            const endDate = document.querySelectorAll('.date-input')[1].value;
            
            if (!startDate || !endDate) {
                alert('请选择开始和结束日期');
                return;
            }
            
            console.log('应用日期筛选:', startDate, '至', endDate);
            
            // 这里可以添加实际的日期筛选逻辑
            // 目前只是模拟
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                alert(`已筛选 ${startDate} 至 ${endDate} 的数据`);
            }, 1000);
        }

        // 重置所有筛选
        function resetAllFilters() {
            console.log('重置所有筛选条件');
            
            // 重置日期输入
            const today = new Date();
            const thirtyDaysAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);
            
            document.querySelectorAll('.date-input')[0].valueAsDate = thirtyDaysAgo;
            document.querySelectorAll('.date-input')[1].valueAsDate = today;
            
            // 重置下拉选择
            document.querySelectorAll('.filter-select').forEach(select => {
                select.selectedIndex = 0;
            });
            
            // 重置搜索框
            document.querySelector('.search-input').value = '';
            
            // 这里可以添加实际的重置逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                alert('已重置所有筛选条件');
            }, 1000);
        }

        // 按课程筛选
        function filterByCourse(course) {
            console.log('按课程筛选:', course);
            
            // 这里可以添加实际的课程筛选逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                updateFilterResults(course);
            }, 800);
        }

        // 按指标类型筛选
        function filterByMetricType(metricType) {
            console.log('按指标类型筛选:', metricType);
            
            // 这里可以添加实际的指标类型筛选逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                updateFilterResults(metricType);
            }, 800);
        }

        // 更改数据粒度
        function changeDataGranularity(granularity) {
            console.log('更改数据粒度:', granularity);
            
            // 这里可以添加实际的数据粒度更改逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                
                // 更新图表标题显示当前粒度
                document.querySelectorAll('.chart-title').forEach(title => {
                    const originalTitle = title.textContent.replace(/$(日|周|月|季度)$/, '');
                    title.textContent = `${originalTitle} (${granularity})`;
                });
                
                alert(`已切换到${granularity}数据视图`);
            }, 800);
        }

        // 下载图表数据
        function downloadChartData(chartTitle) {
            console.log('下载图表数据:', chartTitle);
            
            // 这里可以添加实际的下载逻辑
            // 目前只是模拟
            alert(`正在下载${chartTitle}数据...`);
            
            // 模拟下载完成
            setTimeout(() => {
                alert(`${chartTitle}数据下载完成`);
            }, 1500);
        }

        // 展开图表
        function expandChart(chartCard) {
            const chartTitle = chartCard.querySelector('.chart-title').textContent;
            console.log('展开图表:', chartTitle);
            
            // 这里可以添加实际的展开图表逻辑
            // 目前只是模拟全屏效果
            chartCard.classList.toggle('expanded');
            
            if (chartCard.classList.contains('expanded')) {
                alert(`${chartTitle}已进入全屏模式`);
            } else {
                alert(`${chartTitle}已退出全屏模式`);
            }
        }

        // 更改图表时间范围
        function changeChartTimeRange(chartCard, timeRange) {
            const chartTitle = chartCard.querySelector('.chart-title').textContent;
            console.log('更改图表时间范围:', chartTitle, timeRange);
            
            // 这里可以添加实际的时间范围更改逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                alert(`${chartTitle}已切换到${timeRange}视图`);
            }, 800);
        }

        // 搜索表格数据
        function searchTableData(searchTerm) {
            console.log('搜索表格数据:', searchTerm);
            
            if (searchTerm.length > 2) {
                // 这里可以添加实际的搜索逻辑
                // 目前只是模拟
                const rows = document.querySelectorAll('.data-table tbody tr');
                let matchCount = 0;
                
                rows.forEach(row => {
                    const rowText = row.textContent.toLowerCase();
                    if (rowText.includes(searchTerm.toLowerCase())) {
                        row.style.display = '';
                        matchCount++;
                    } else {
                        row.style.display = 'none';
                    }
                });
                
                // 更新表格信息
                document.querySelector('.table-info').textContent = 
                    `找到 ${matchCount} 条匹配记录`;
            } else if (searchTerm.length === 0) {
                // 重置搜索
                document.querySelectorAll('.data-table tbody tr').forEach(row => {
                    row.style.display = '';
                });
                
                document.querySelector('.table-info').textContent = 
                    `显示 1-8 条，共 256 条记录`;
            }
        }

        // 筛选表格数据
        function filterTableData(filterType) {
            console.log('筛选表格数据:', filterType);
            
            // 这里可以添加实际的筛选逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                alert(`已筛选${filterType}数据`);
            }, 800);
        }

        // 显示列设置
        function showColumnSettings() {
            console.log('显示列设置');
            
            // 这里可以添加实际的列设置逻辑
            // 目前只是模拟
            alert('列设置功能即将推出');
        }

        // 导出表格数据
        function exportTableData() {
            console.log('导出表格数据');
            
            // 这里可以添加实际的导出逻辑
            // 目前只是模拟
            alert('正在导出数据到Excel...');
            
            // 模拟导出完成
            setTimeout(() => {
                alert('数据导出完成');
            }, 1500);
        }

        // 导航到上一页
        function navigateToPrevPage() {
            console.log('导航到上一页');
            
            // 这里可以添加实际的分页导航逻辑
            const currentPage = parseInt(document.querySelector('.page-item.active').textContent);
            if (currentPage > 1) {
                navigateToPage(currentPage - 1);
            }
        }

        // 导航到下一页
        function navigateToNextPage() {
            console.log('导航到下一页');
            
            // 这里可以添加实际的分页导航逻辑
            const currentPage = parseInt(document.querySelector('.page-item.active').textContent);
            if (currentPage < 5) { // 假设有5页
                navigateToPage(currentPage + 1);
            }
        }

        // 导航到指定页
        function navigateToPage(pageNum) {
            console.log('导航到页面:', pageNum);
            
            // 更新分页状态
            document.querySelectorAll('.page-item').forEach(item => {
                if (item.textContent === pageNum.toString()) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // 这里可以添加实际的分页数据加载逻辑
            showLoadingState();
            
            setTimeout(() => {
                hideLoadingState();
                
                // 更新表格信息
                const startRecord = (pageNum - 1) * 8 + 1;
                const endRecord = Math.min(pageNum * 8, 256);
                
                document.querySelector('.table-info').textContent = 
                    `显示 ${startRecord}-${endRecord} 条，共 256 条记录`;
                
                alert(`已加载第${pageNum}页数据`);
            }, 800);
        }

        // 查看数据详情
        function viewDataDetails(row) {
            const date = row.cells[0].textContent;
            const category = row.cells[1].textContent;
            console.log('查看数据详情:', date, category);
            
            // 这里可以添加实际的查看详情逻辑
            // 目前只是模拟
            alert(`查看 ${date} ${category} 的详细数据`);
        }

        // 配置洞察
        function configureInsights() {
            console.log('配置洞察报告');
            
            // 这里可以添加实际的配置逻辑
            // 目前只是模拟
            alert('洞察报告配置功能即将推出');
        }

        // 生成报告
        function generateReport() {
            console.log('生成洞察报告');
            
            // 这里可以添加实际的报告生成逻辑
            // 目前只是模拟
            alert('正在生成PDF报告...');
            
            // 模拟报告生成完成
            setTimeout(() => {
                alert('洞察报告生成完成，已保存到下载文件夹');
            }, 2000);
        }

        // 处理洞察操作
        function handleInsightAction(insightTitle, actionType) {
            console.log('处理洞察操作:', insightTitle, actionType);
            
            // 根据操作类型执行相应操作
            if (actionType.includes('fa-chart-line')) {
                alert(`查看${insightTitle}的详细图表`);
            } else if (actionType.includes('fa-download')) {
                alert(`下载${insightTitle}相关数据`);
            } else if (actionType.includes('fa-map-marker-alt')) {
                alert(`查看${insightTitle}的区域分析`);
            } else if (actionType.includes('fa-bell')) {
                alert(`设置${insightTitle}的预警规则`);
            } else if (actionType.includes('fa-money-bill-wave')) {
                alert(`查看${insightTitle}的成本分析`);
            } else if (actionType.includes('fa-share-alt')) {
                alert(`分享${insightTitle}的成功经验`);
            } else if (actionType.includes('fa-box')) {
                alert(`调整${insightTitle}的库存策略`);
            } else if (actionType.includes('fa-handshake')) {
                alert(`管理${insightTitle}的供应商`);
            } else if (actionType.includes('fa-clipboard-check')) {
                alert(`分析${insightTitle}的流程优化`);
            } else if (actionType.includes('fa-award')) {
                alert(`表彰${insightTitle}的负责团队`);
            }
        }

        // 显示加载状态
        function showLoadingState() {
            document.body.style.opacity = '0.8';
            document.body.style.cursor = 'wait';
        }

        // 隐藏加载状态
        function hideLoadingState() {
            document.body.style.opacity = '1';
            document.body.style.cursor = 'default';
        }

        // 更新筛选结果
        function updateFilterResults(filterType) {
            // 这里可以添加实际的筛选结果更新逻辑
            // 目前只是模拟更新表格信息
            document.querySelector('.table-info').textContent = 
                `已筛选${filterType}，显示 1-8 条，共 128 条记录`;
        }

        // 更新数据表格
        function updateDataTable() {
            // 这里可以添加实际的表格数据更新逻辑
            // 目前只是模拟
            console.log('更新数据表格...');
        }
    </script>
</body>
</html>